(()=>{var t={44:(t,s,e)=>{const{MarkovChainBase:n}=e(290),{MarkovChainText:r}=e(424);t.exports={MarkovChainBase:n,MarkovChainText:r}},290:t=>{const s="markov-chain-base";t.exports={MarkovChainBase:class{constructor(t=2,s=null){this.n=Math.max(1,t||1),this.transitions=new Map,this.persistence=s}get k(){return this.n-1}train(t){for(let s=0;s<t.length-this.n+1;++s){const e=t.slice(s,s+this.n-1).join(" "),n=t[s+this.n-1];this.transitions.has(e)||this.transitions.set(e,new Map);const r=this.transitions.get(e);r.set(n,(r.get(n)||0)+1)}return this}setTransitions(t){for(const[s,e]of Object.entries(t))this.transitions.set(s,new Map(e));return this}generate(t,s=1){if(t.length<this.n-1)throw new Error(`need ${this.n-1} or more states, but got ${t.length}`);const e=(t,s)=>s>0?t.slice(-s):[];let n=e(t,this.n-1);const r=[...t],i="number"==typeof s?(t,e)=>e<s:s;for(let t=0;i(r,t);++t){const t=n.join(" "),s=this.transitions.get(t);if(!s||!s.size)break;let i=0;for(const t of s.values())i+=t;let o=0;const a=Math.random();for(const[t,h]of s)if(o+=h/i,a<=o){r.push(t),n=e([...n,t],this.n-1);break}}return r}toJson(){const t={type:s,n:this.n,transitions:{}};for(const[s,e]of this.transitions)t.transitions[s]=Array.from(e.entries());return t}fromJson(t){return t&&t.type===s?(this.n=t.n||this.n,this.setTransitions(t.transitions)):this}async save(){if(!this.persistence)throw new Error("persistor not defined");await this.persistence.save(this)}async load(){if(!this.persistence)throw new Error("persistor not defined");await this.persistence.load(this)}}}},424:(t,s,e)=>{const{MarkovChainBase:n}=e(290);t.exports={MarkovChainText:class extends n{constructor(...t){super(...t),this.sep=/(?:\s|\r?\n)+/g}train(t){const s=t.split(this.sep);return super.train(s)}generate(t,s=1){const e=t.trim().split(this.sep);return super.generate(e,s).join(" ")}generateSentence(t,s=1){return this.generate(t,(t=>t.filter((t=>t.endsWith("."))).length<s))}}}}},s={},e=function e(n){var r=s[n];if(void 0!==r)return r.exports;var i=s[n]={exports:{}};return t[n](i,i.exports,e),i.exports}(44),n=window;for(var r in e)n[r]=e[r];e.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})();